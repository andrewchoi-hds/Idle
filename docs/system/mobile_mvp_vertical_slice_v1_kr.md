# 모바일 MVP 수직슬라이스 가이드 v1

기준 시점: 2026-02-24  
대상 파일:
- `/Users/hirediversity/Idle/mobile/mvp_v1/index.html`
- `/Users/hirediversity/Idle/mobile/mvp_v1/app.mjs`
- `/Users/hirediversity/Idle/mobile/mvp_v1/engine.mjs`
- `/Users/hirediversity/Idle/scripts/check_mobile_mvp_slice_regression_v1.mjs`

## 1) 목적
- 모바일 화면 기준으로 전투 1루프 + 돌파/환생 1루프 + 저장/복구 UI를 한 화면에서 검증한다.
- 기존 밸런스 데이터(`realm_progression_v1`, `realm_locale_ko_v1`)를 직접 읽어 수직슬라이스를 빠르게 반복한다.

## 2) 실행 방법
```bash
cd /Users/hirediversity/Idle
npm run mobile:mvp:serve
```
- 브라우저 접속:
  - `http://localhost:4173/mobile/mvp_v1/index.html`
- 모바일 점검:
  - 브라우저 DevTools Device Toolbar(예: iPhone 12/Pixel 7)에서 UI/터치 플로우 확인
  - `safe-area`(노치/홈 인디케이터) 영역에서 하단 버튼/모달이 가려지지 않는지 확인

## 3) 핵심 기능
- 전투 1회:
  - 현재 경지 기반 승패 판정
  - 기/영석/환생정수 증감
- 돌파 시도:
  - 필요 기 충족 시 확률 판정
  - 성공/경상 실패/경지 후퇴/사망 실패(환생) 처리
  - 영약/수호부 사용 반영
  - 화면에 4분기 확률 프리뷰(`성공/경상/후퇴/사망`)를 표시
  - 도겁 위험도 배지(`비도겁/경미/주의/위험/치명`)와 실패 내 사망 비율을 표시
  - 1회 돌파 시도 기대값(`기/환생정수/경지`)을 표시해 리스크를 수치로 확인
  - 고위험/고비용 수동 도겁 시도 시 확인 모달을 띄워 오입력을 방지
  - 보정 효과 요약(`previewMitigationLabel`, `previewMitigationHint`)으로 보정 전/후 성공·사망 변화와 위험도 변화 표시
  - 현재 설정/보유 자원 기준 `돌파 권장` 배지(`자원 비축/수호부 권장/영약 권장/준비 완료/재정비 권장`)를 표시
  - `권장 설정 적용` 버튼으로 영약/수호부 토글을 현재 위험도 기준으로 즉시 동기화
- 자동 10초 진행:
  - 기 자동 축적 + 자동 전투 + 자동 돌파 루프
  - 자동 재개 워밍업이 남아 있으면 해당 구간의 자동 돌파를 skip하고 잔여 시간을 차감
  - 도겁 자동 허용 옵션 연동
  - 자동 돌파 경로에서 고위험/고기소모 도겁은 정책으로 차단하고 수동 확인을 유도
  - 차단 발생 시 `치명/고위험/고기소모` 사유를 집계해 상태 문구/로그/오프라인 정산 결과에 표시
  - 정책 차단이 연속 임계치(기본 3회)를 넘으면 자동 돌파를 일시정지해 무한 소모 루프를 차단
  - `자동 재개` 가이드/버튼으로 현재 조건 기준 재개 가능 여부를 안내하고, 가능 시 자동 돌파(필요 시 자동 도겁 허용 포함)를 원클릭 복구
  - 도겁 단계 자동 재개는 확인 모달에서 위험도/사망률/기대값을 확인한 뒤 진행
  - 도겁 단계 재개 확인 모달에서 `권장 설정(영약/수호부)` 자동 적용 계획을 함께 안내하고 확인 시 원클릭 반영
  - `전투 속도` 옵션(저속/표준/고속)에 따라 루프 cadence 변경
- 실시간 자동 진행:
  - `실시간 자동 시작/중지` 버튼으로 1초 단위 루프 실행
  - 전투 속도 옵션 기준 cadence를 타임라인 누적 방식으로 적용
  - 10초마다 누적 요약 로그를 기록하고 3틱마다 localStorage 동기화
  - 백그라운드 진입 시 실시간 자동 중지 + 포그라운드 복귀 시 오프라인 정산 자동 시도
  - `autoResumeRealtime`가 켜져 있으면 포그라운드 복귀/앱 진입/세이브 불러오기 후 실시간 자동 재개
  - `자동 돌파 재개` 버튼으로 복구한 직후 6초 워밍업 동안 자동 돌파 시도를 지연해 재개 직후 급격한 소모를 방지
  - 워밍업 길이는 옵션(`optAutoBreakthroughResumeWarmupSec`, 0~30초)으로 조정 가능하며 0초면 즉시 돌파 시도 허용
  - 실시간 상태 라인에 돌파 워밍업 잔여 시간(`돌파 워밍업 Ns`)을 노출
  - 실시간 통계 카드(`누적 시간/전투/돌파/환생`)를 화면에 상시 표시
  - `실시간 리포트 JSON` 버튼으로 누적 세션 리포트를 `savePayload`로 내보내기
  - `실시간 통계 초기화` 버튼으로 누적 세션 통계를 즉시 리셋
- 저장/복구:
  - 로컬 저장(localStorage, 슬롯 1~3)
  - JSON 내보내기/가져오기
  - 활성 슬롯 -> 대상 슬롯 복제(`optCopySlotTarget`, `btnCopySlot`)
    - 복제 대상 선택에서 활성 슬롯 옵션은 비활성화
    - 복제 대상 옵션 라벨에 슬롯 상태(`저장됨/비어있음/손상`)를 함께 표시
    - 잠긴 슬롯은 복제 대상으로 선택할 수는 있지만 실제 복제는 정책에서 차단
    - 복제는 localStorage 원본이 아니라 현재 메모리 상태 스냅샷을 기준으로 수행
    - 대상 슬롯에 데이터가 있으면 overwrite 확인 모달 후 진행
    - 복제 버튼은 대상 슬롯이 활성 슬롯과 동일하거나 잠금 상태일 때 비활성화
  - 활성 슬롯 잠금/해제(`btnToggleSlotLock`)
    - 잠금 시 해당 슬롯 대상 복제(덮어쓰기)와 슬롯 삭제를 차단
    - 슬롯 요약/복제 대상 옵션/힌트 라인에서 잠금 상태를 즉시 표시
  - 활성 슬롯 삭제(메모리 상태 유지)
    - 활성 슬롯이 비어 있으면 삭제를 skip하고 상태 메시지만 표시
    - 활성 슬롯이 잠겨 있으면 삭제를 차단하고 잠금 해제를 안내
    - 활성 슬롯이 비어 있으면 삭제 버튼 비활성화
  - 슬롯 복제/삭제 확인 규칙은 엔진 정책 함수로 공통 관리
  - 슬롯 액션 힌트(`slotCopyHint`, `slotDeleteHint`)에 현재 정책 기반 안내 문구를 분리 표시
  - 슬롯 액션 힌트 톤(`info/warn/error`)을 정책 결과에 맞춰 색상으로 표시
  - 복제 대상 슬롯 상태 프리뷰(`slotTargetHint`)를 표시해 비어있음/데이터 있음/손상 상태를 즉시 확인
  - 슬롯 요약 목록(슬롯별 플레이어/경지/저장시각/상태) 표시
  - 슬롯 요약 항목 탭/Enter로 해당 슬롯 즉시 활성화 + 저장 데이터가 있으면 즉시 불러오기
    - 다른 슬롯에서 퀵 로드 시 확인 모달 후 진행
    - 퀵 로드 연속 입력은 0.7초 디바운스로 중복 실행 방지
  - 오프라인 복귀 정산(최대 12시간 cap)
    - 앱 진입 시 기존 세이브 자동 로드 후 1회 적용
    - 로컬 불러오기/JSON 가져오기 직후에도 동일 로직 적용
    - 자동 재개 워밍업이 남아 있으면 오프라인 정산에서도 해당 구간 자동 돌파를 skip하고 잔여 시간을 동기화
    - 정산 발생 시 팝업 카드로 시간/전투/돌파/환생/재화 순변화 노출
    - 팝업 카드에 워밍업 요약(`offlineWarmupSummary`)을 표시해 before/after/차단 횟수를 즉시 확인
    - 팝업 카드에 핵심 이벤트 요약(`offlineCriticalSummary`)을 표시해 워밍업/일시정지/사망 건수를 즉시 확인
    - 세부 로그에 워밍업 요약 이벤트(`offline_warmup_summary`)를 남겨 리포트 내 추적성을 확보
    - 세부 로그 렌더링 시 핵심 이벤트를 우선순위(`워밍업 요약 > 자동 돌파 일시정지 > 도겁 사망 > 기타`)로 상단 배치
    - `btnToggleOfflineCriticalOnly`로 세부 로그를 `전체/핵심만` 모드로 즉시 전환
    - `offlineDetailFilterSummary`에 현재 필터의 표시 건수(`전체 N건` 또는 `핵심 V/T건`)를 노출
    - `offlineDetailHiddenSummary`에 숨김 건수(`숨김 없음` 또는 `비핵심 N건 숨김`)를 노출
    - `offlineDetailHiddenKindsSummary`에 숨김 상세 구성(예: `전투 승리 1건 · 전투 패배 1건`)을 노출
    - `offlineDetailCompareCode`에 비교 코드(`ODR1-*`)를 노출해 로그 분포 비교를 빠르게 수행
    - `btnCopyOfflineCompareCode`로 비교 코드를 클립보드에 즉시 복사(미지원 시 `savePayload`에 대체 출력)
    - 비교 코드 입력(`offlineCompareCodeInput`) + 대조 버튼(`btnCompareOfflineCode`)으로 현재 코드와 일치/차이 요약을 즉시 확인
    - 보기 모드 정렬 버튼(`btnApplyOfflineCompareViewMode`)으로 `view-only mismatch`일 때 대상 코드 모드(전체/핵심)로 즉시 정렬
    - `btnPasteOfflineCompareCode`로 클립보드 텍스트에서 비교 코드를 추출해 입력/대조를 즉시 실행
    - `btnLoadOfflineCompareCodeFromPayload`로 `savePayload` JSON/텍스트에서 비교 코드를 추출해 입력/대조를 즉시 실행(상태 메시지에 추출 출처 포함)
    - 비교 코드 출처 라인(`offlineCompareCodeSource`)에 입력/클립보드/savePayload 추출 경로를 상시 표시
    - 비교 코드 입력값이 비어있으면 출처 라인을 즉시 `없음`으로 복원하고, 값이 있으면 즉시 `비교 코드 입력값`으로 전환
    - 비교 코드 대조 버튼/Enter 재실행 시에는 마지막 확정 출처(`savePayload/clipboard/input`)를 유지하고, 입력 변경이 감지된 경우에만 출처를 `입력값/없음`으로 전환
    - 비교 코드 대조 실행 시 빈 입력(`입력 필요`)과 형식 오류(`형식 오류`) 상태 메시지를 분리해 즉시 안내
    - 비교 코드 대조 상태 메시지는 항상 `[출처] 메시지` 포맷으로 출력해 성공/오류 경로 모두 동일한 추적 컨텍스트를 유지
    - 클립보드/`savePayload` 추출 실패 경로(`읽기 미지원/읽기 실패/코드 인식 실패`)도 상태 메시지에 출처 프리픽스를 유지
    - 클립보드 읽기 미지원/읽기 실패 경로에서도 출처 라인(`offlineCompareCodeSource`)을 `클립보드 텍스트`로 즉시 동기화
    - 비교 코드 출처 라인 톤(`info/warn/error`)을 함께 반영해 snapshot 기반/수동 입력 기반/미확인 출처를 색상으로 즉시 구분
    - 비교 코드 현재 요약 라인(`offlineCompareCodeCurrentSummary`)에 기준 코드의 총건수/핵심표시/숨김/보기 모드를 상시 표시
    - 비교 코드 현재 요약 라인 톤(`info/warn/error`)을 함께 반영해 대기/형식 오류/정상 코드 상태를 색상으로 즉시 구분
    - 비교 코드 대상 요약 라인(`offlineCompareCodeTargetSummary`)에 대상 코드의 총건수/핵심표시/숨김/보기 모드를 상시 표시
    - 비교 코드 대상 요약 라인 톤(`info/warn/error`)을 함께 반영해 대기/형식 오류/정상 입력 상태를 색상으로 즉시 구분
    - 비교 코드 차이 요약 라인(`offlineCompareCodeDeltaSummary`)에 대상-기준 변화량/보기 모드/checksum 차이를 상시 표시
    - 비교 코드 차이 요약 라인 톤(`info/warn/error`)을 함께 반영해 대기/형식 오류/집계 불일치 위험도를 색상으로 즉시 구분
    - 비교 코드 일치 요약 라인(`offlineCompareCodeMatchSummary`)에 항목별 일치/불일치(총/핵심표시/숨김/보기/checksum)를 상시 표시
    - 비교 코드 일치 요약 라인 톤(`info/warn/error`)을 함께 반영해 대기/형식 오류/집계 불일치 위험도를 색상으로 즉시 구분
    - 기준 코드가 리렌더될 때 비교 결과 라인(`offlineCompareCodeResult`)도 입력값 기준으로 즉시 재계산해 stale 상태를 방지
    - 비교 결과 라인 톤(`info/warn/error`)을 함께 반영해 대기/형식 오류/불일치 위험도를 즉시 구분
    - 비교 가이드 라인(`offlineCompareCodeActionHint`)에 입력 필요/형식 오류/일치/보기 모드 차이/집계 차이별 다음 액션을 상시 표시
    - 비교 가이드 라인 톤(`info/warn/error`)을 함께 반영해 상태 우선순위를 색상으로 즉시 구분
    - 팝업에서 세부 로그 토글(최근 이벤트) + 정산 리포트 JSON 내보내기 지원
- 옵션:
  - `앱 복귀 시 실시간 자동 재개` (`autoResumeRealtime`, on/off)
  - `자동 재개 돌파 워밍업(초)` (`autoBreakthroughResumeWarmupSec`, `0~30`, 기본 6)
  - `전투 속도` (`1=저속, 2=표준, 3=고속`)
    - 저속: `battleEverySec=3`, `breakthroughEverySec=4`, `passiveQiRatio=0.01`
    - 표준: `battleEverySec=2`, `breakthroughEverySec=3`, `passiveQiRatio=0.012`
    - 고속: `battleEverySec=1`, `breakthroughEverySec=2`, `passiveQiRatio=0.014`
  - `오프라인 정산 시간(시간)` (`1~168`)
  - `오프라인 세부 로그 개수` (`5~120`)
  - 위 5개는 저장 데이터(`settings`)에 영속화되어 다음 접속에도 유지
  - `세이브 슬롯` 선택(`optSaveSlot`, 1~3): 저장/불러오기 대상 슬롯 지정

## 4) 저장 포맷
- localStorage key:
  - 슬롯 save: `idle_xianxia_mobile_mvp_v1_save_slot_{1|2|3}`
  - 슬롯 선호값: `idle_xianxia_mobile_mvp_v1_slot_pref`
  - 슬롯 잠금값: `idle_xianxia_mobile_mvp_v1_slot_locks`
  - 레거시 fallback: `idle_xianxia_mobile_mvp_v1_save` (slot1 비어있을 때만 자동 참조)
- 포함 항목:
  - 경지/환생 횟수
  - 통화(기/영석/환생정수)
  - 영약/부적 수량
  - 자동 옵션 상태
  - 이벤트 로그
  - 마지막 활동 시각(`lastActiveEpochMs`)
  - 실시간 세션 통계(`realtimeStats`: sessionStartedAtIso/timelineSec/autoBreakthroughWarmupUntilTimelineSec/elapsedSec/전투·돌파·환생/anchor 재화)

## 5) 오프라인 복귀 정산 규칙
- 계산:
  - `rawOfflineSec = floor((nowEpochMs - anchorEpochMs) / 1000)`
  - `appliedOfflineSec = min(rawOfflineSec, offlineCapHours * 3600)`
- anchor 우선순위:
  - `lastActiveEpochMs`
  - `lastSavedAtIso`(파싱 가능 시)
- 적용 방식:
  - `battleSpeed` 기반 cadence를 적용한 `runAutoSliceSeconds(..., { seconds: appliedOfflineSec, suppressLogs: true, autoBreakthroughWarmupUntilSec })`로 압축 정산
  - 정산 summary에 워밍업 메타(`autoBreakthroughWarmupRemainingSecBefore/After`)를 기록해 오프라인 전후 잔여시간 추적
  - 정산 후 단일 `offline` 로그를 남기고 `lastActiveEpochMs`를 현재 시각으로 동기화
- UI:
  - `offlineModal` 카드에서 정산 결과를 즉시 확인 후 닫기 가능
  - `offlineWarmupSummary`에 워밍업 요약 라벨(`buildOfflineWarmupTelemetryLabelKo`) 표시
  - `offlineCriticalSummary`에 핵심 이벤트 요약 라벨(`buildOfflineDetailCriticalSummaryLabelKo`) 표시
  - `btnToggleOfflineCriticalOnly` 토글 상태에 따라 세부 로그 소스를 `filterOfflineDetailEventsByMode(..., \"all|critical\")`로 전환
  - `offlineDetailFilterSummary`에 필터 결과 요약 라벨(`buildOfflineDetailFilterSummaryLabelKo`) 표시
  - `offlineDetailHiddenSummary`에 숨김 이벤트 요약 라벨(`buildOfflineDetailHiddenSummaryLabelKo`) 표시
  - `offlineDetailHiddenKindsSummary`에 숨김 상세 요약 라벨(`buildOfflineDetailHiddenKindsSummaryLabelKo`) 표시
  - `btnToggleOfflineDetail`로 상세 이벤트 목록 확장/축소
  - `btnExportOfflineReport`로 정산 리포트를 JSON 형태로 `savePayload`에 주입(클립보드 복사 시도)
    - 리포트에 워밍업 텔레메트리(`warmup.before/after/consumed/skippedAttempts`)를 함께 기록
    - 리포트에 상세 로그 필터 스냅샷(`detailReportSnapshot`: 전체/핵심 표시건수, 숨김건수, 숨김 상위 종류, kind digest, compareCode)을 함께 기록
    - 내보내기 시점 필터 스냅샷(`detailViewSnapshotAtExport`: 현재 모드/표시·숨김 건수/모드별 라벨/kind digest/compareCode)을 함께 기록
  - 상세 로그 수집 개수는 `offlineEventLimit` 설정값을 따른다

## 6) 모바일 뷰포트 최적화
- `viewport-fit=cover` + CSS `env(safe-area-inset-*)` 패딩 적용.
- 버튼/입력 최소 높이 44px로 터치 타겟 확보.
- 작은 화면(`<=680px`)에서 액션 패널(`.actions`) sticky 고정.
- 로그 목록 스크롤 영역(`max-height`)로 긴 로그에서도 조작 영역 유지.
- 상태 텍스트(`aria-live="polite"`)로 복귀 정산/오류 메시지 접근성 강화.

## 7) 회귀 체크
```bash
cd /Users/hirediversity/Idle
npm run mobile:mvp:dom:check
npm run mobile:mvp:check
```
- 점검 시나리오:
  - 전투 1회 상태 변화
  - 기 부족 돌파 차단
  - 사망 실패 → 환생 루프 발동
  - 돌파 확률 프리뷰 4분기 분포(`성공+경상+후퇴+사망=100%`) 일관성 검증
  - 도겁 위험도 판정(`resolveBreakthroughRiskTier`) 및 보정 적용 시 위험도 하향 검증
  - 기대값 요약(`resolveBreakthroughExpectedDelta`)이 도겁/비도겁 구간의 기대 재화·경지 변화를 일관되게 반환하는지 검증
  - 수동 시도 확인 정책(`resolveBreakthroughManualAttemptPolicy`)이 고위험/고기소모 구간에서 확인 필요 여부를 일관되게 반환하는지 검증
  - 자동 시도 차단 정책(`resolveBreakthroughAutoAttemptPolicy`)이 고위험 도겁 구간을 건너뛰고 차단 카운트를 누적하는지 검증
  - 자동 차단 이벤트가 사유 라벨/후속 액션 문구를 포함하고 사유별 카운트 합이 총 차단 횟수와 일치하는지 검증
  - 자동 차단 연속 발생 시 자동 돌파 일시정지(`autoBreakthroughPaused`)가 발동하고 설정이 `autoBreakthrough=false`로 전환되는지 검증
  - 자동 재개 정책(`resolveAutoBreakthroughResumePolicy`)이 상태별(이미 진행 중/재개 가능/도겁 허용 필요/재개 보류)로 일관된 액션 가능 여부를 반환하는지 검증
  - 자동 재개 확인 정책(`resolveAutoBreakthroughResumeConfirmPolicy`)이 도겁 단계에서 확인 필요 여부를 일관되게 반환하는지 검증
  - 자동 재개 권장 적용 정책(`resolveAutoBreakthroughResumeRecommendationPlan`)이 확인 모달 경로에서만 자동 적용 플랜을 활성화하는지 검증
  - 자동 재개 워밍업 설정(`autoBreakthroughResumeWarmupSec`)이 초기 옵션 적용/저장 복원/범위 clamp(`0~30`)에서 일관되게 동작하는지 검증
  - 워밍업 잔여시간 계산(`resolveAutoBreakthroughWarmupRemainingSec`)이 경과 시간에 따라 0 이하로 내려가지 않도록 clamp되는지 검증
  - 오프라인 워밍업 텔레메트리(`resolveOfflineWarmupTelemetry`)가 before/after/consumed를 일관되게 정규화하는지 검증
  - 오프라인 워밍업 라벨(`buildOfflineWarmupTelemetryLabelKo`)이 `워밍업 없음/부분 소모/소진` 케이스를 일관된 문구로 반환하는지 검증
  - 오프라인 워밍업 요약 이벤트(`offline_warmup_summary`)가 워밍업 존재 시 기록되고 비워밍업 케이스에서는 생성되지 않는지 검증
  - 오프라인 상세 로그 정렬(`prioritizeOfflineDetailEvents`)이 핵심 이벤트 우선순위를 유지하고 동일 우선순위 내 입력 순서를 보존하는지 검증
  - 오프라인 상세 로그 필터(`filterOfflineDetailEventsByMode`)가 `critical` 모드에서 핵심 이벤트만 남기고 순서를 보존하는지 검증
  - 오프라인 상세 로그 필터 요약(`summarizeOfflineDetailFilterResult`, `buildOfflineDetailFilterSummaryLabelKo`)이 모드별 표시/숨김 건수와 라벨을 일관되게 반환하는지 검증
  - 오프라인 상세 로그 숨김 요약(`buildOfflineDetailHiddenSummaryLabelKo`)이 모드/숨김 건수에 맞는 라벨을 반환하는지 검증
  - 오프라인 상세 로그 숨김 구성 요약(`summarizeOfflineDetailHiddenKinds`, `buildOfflineDetailHiddenKindsSummaryLabelKo`)이 숨김 종류/건수와 라벨을 일관되게 반환하는지 검증
  - 오프라인 종류 digest(`buildOfflineDetailKindDigest`)가 이벤트 분포 signature/상위 종류를 일관되게 반환하는지 검증
  - 오프라인 비교 코드(`buildOfflineDetailCompareCode`, `isOfflineDetailCompareCode`)가 모드 구분/checksum 포맷/검증 결과를 일관되게 반환하는지 검증
  - 오프라인 비교 코드 추출(`extractOfflineDetailCompareCode`)이 원문/문장/JSON 텍스트에서 코드를 일관되게 추출하는지 검증
  - 오프라인 payload 기반 비교 코드 추출(`extractOfflineDetailCompareCodeFromPayloadText`)이 `detailViewSnapshotAtExport`/`detailReportSnapshot` 우선순위와 일반 텍스트 fallback을 일관되게 적용하는지 검증
  - 오프라인 payload 비교 코드 출처 메타(`extractOfflineDetailCompareCodeFromPayloadTextWithSource`)가 `detail_view_snapshot/detail_report_snapshot/text/none` 분기를 일관되게 반환하는지 검증
  - 오프라인 비교 코드 출처 라벨(`buildOfflineDetailCompareCodeSourceLabelKo`)이 source key별 표시 문구를 일관되게 반환하는지 검증
  - 오프라인 비교 코드 출처 톤(`buildOfflineDetailCompareCodeSourceTone`)이 source key별 `info/warn/error`를 일관되게 반환하는지 검증
  - 오프라인 비교 상태 라벨(`buildOfflineDetailCompareStatusLabelKo`)이 source key와 메시지를 `[출처] 메시지` 포맷으로 일관되게 조합하는지 검증
  - 오프라인 비교 상태 라벨(`buildOfflineDetailCompareStatusLabelKo`)이 클립보드/`savePayload` 추출 실패 메시지에서도 출처 프리픽스를 일관되게 유지하는지 검증
  - 오프라인 비교 클립보드 실패 메타(`resolveOfflineDetailCompareClipboardFailureInfo`)가 실패 사유별 source/message 매핑을 일관되게 반환하는지 검증
  - 오프라인 비교 payload 실패 메타(`resolveOfflineDetailComparePayloadFailureInfo`)가 실패 사유별 source/message 매핑을 일관되게 반환하는지 검증
  - 오프라인 비교 payload 성공 출처 정규화(`resolveOfflineDetailComparePayloadLoadSource`)가 `detail_view_snapshot/detail_report_snapshot/text` 유지 및 기타 입력 fallback(`payload`)을 일관되게 반환하는지 검증
  - 오프라인 비교 입력 출처 해석(`resolveOfflineDetailCompareInputSource`)이 입력값 공백/유효 문자열에 대해 `none/input`을 일관되게 반환하는지 검증
  - 오프라인 비교 대조 출처 해석(`resolveOfflineDetailCompareCheckSource`)이 `keep/input/명시 출처` 분기에서 최종 출처를 일관되게 반환하는지 검증
  - 오프라인 비교 대상 입력 상태 해석(`resolveOfflineDetailCompareTargetInputState`)이 빈 입력/형식 오류/유효 코드 케이스를 `empty/invalid/valid`로 일관되게 반환하는지 검증
  - 오프라인 비교 대상 입력 상태 메시지(`resolveOfflineDetailCompareTargetInputStateStatusMessageKo`)가 `empty/invalid` 상태를 `비교 코드 입력 필요/비교 코드 형식 오류`로 일관되게 반환하는지 검증
  - 오프라인 비교 대상 형식 오류 라벨(`buildOfflineDetailCompareInvalidTargetLabelKo`)이 추출 실패/대조 실패 경로에서 동일 문구를 일관되게 반환하는지 검증
  - 오프라인 비교 현재 코드 누락 라벨(`buildOfflineDetailCompareMissingCurrentLabelKo`)이 현재 코드 부재 대조 실패 경로에서 동일 문구를 일관되게 반환하는지 검증
  - 오프라인 비교 결과 대기 라벨(`buildOfflineDetailCompareResultPendingLabelKo`)이 대조 미실행/대상 미입력 경로에서 동일 문구를 일관되게 반환하는지 검증
  - 오프라인 비교 결과 입력 필요 라벨(`buildOfflineDetailCompareResultInputRequiredLabelKo`)이 대상 형식 오류 경로에서 동일 문구를 일관되게 반환하는지 검증
  - 오프라인 비교 코드 현재 요약 라벨(`buildOfflineDetailCompareCodeCurrentSummaryLabelKo`)이 빈 입력/형식 오류/전체·핵심 보기 케이스를 일관되게 반환하는지 검증
  - 오프라인 비교 코드 현재 요약 톤(`buildOfflineDetailCompareCodeCurrentSummaryTone`)이 빈 입력/형식 오류/정상 입력 케이스에서 `info/warn`을 일관되게 반환하는지 검증
  - 오프라인 비교 코드 대상 요약 라벨(`buildOfflineDetailCompareCodeTargetSummaryLabelKo`)이 빈 입력/형식 오류/전체·핵심 보기 케이스를 일관되게 반환하는지 검증
  - 오프라인 비교 코드 대상 요약 톤(`buildOfflineDetailCompareCodeTargetSummaryTone`)이 빈 입력/형식 오류/정상 입력 케이스에서 `info/warn`을 일관되게 반환하는지 검증
  - 오프라인 비교 코드 차이 요약 라벨(`buildOfflineDetailCompareCodeDeltaSummaryLabelKo`)이 대상 없음/형식 오류/일치/보기 차이 케이스를 일관되게 반환하는지 검증
  - 오프라인 비교 코드 차이 요약 톤(`buildOfflineDetailCompareCodeDeltaSummaryTone`)이 대상 없음/형식 오류/일치/보기 차이/checksum·집계 차이 케이스에서 `info/warn/error`를 일관되게 반환하는지 검증
  - 오프라인 비교 코드 일치 요약 라벨(`buildOfflineDetailCompareCodeMatchSummaryLabelKo`)이 대상 없음/형식 오류/일치·불일치 조합 케이스를 일관되게 반환하는지 검증
  - 오프라인 비교 코드 일치 요약 톤(`buildOfflineDetailCompareCodeMatchSummaryTone`)이 대상 없음/형식 오류/일치/보기 차이/checksum·집계 차이 케이스에서 `info/warn/error`를 일관되게 반환하는지 검증
  - 오프라인 비교 결과 상태 라벨(`buildOfflineDetailCompareResultStateLabelKo`)이 대기/입력 필요/일치/보기 차이/현재 코드 없음 케이스를 일관되게 반환하는지 검증
  - 오프라인 비교 결과 톤(`buildOfflineDetailCompareResultStateTone`)이 대기/입력 필요/일치/보기 차이/현재 코드 없음 케이스에서 `info/warn/error`를 일관되게 반환하는지 검증
  - 오프라인 비교 결과 오류 플래그(`isOfflineDetailCompareResultError`)가 comparable 여부에 따라 오류 상태를 일관되게 반환하는지 검증
  - 오프라인 비교 가이드 입력 필요 라벨(`buildOfflineDetailCompareActionHintInputRequiredLabelKo`)이 대상 미입력 경로에서 동일 문구를 일관되게 반환하는지 검증
  - 오프라인 비교 가이드 대상 형식 오류 라벨(`buildOfflineDetailCompareActionHintInvalidTargetLabelKo`)이 대상 코드 형식 오류 경로에서 동일 문구를 일관되게 반환하는지 검증
  - 오프라인 비교 가이드 현재 코드 누락 라벨(`buildOfflineDetailCompareActionHintMissingCurrentLabelKo`)이 현재 코드 부재 경로에서 동일 문구를 일관되게 반환하는지 검증
  - 오프라인 비교 가이드 일치 라벨(`buildOfflineDetailCompareActionHintIdenticalLabelKo`)이 비교 코드 완전 일치 경로에서 동일 문구를 일관되게 반환하는지 검증
  - 오프라인 비교 가이드 보기 모드 차이 라벨(`buildOfflineDetailCompareActionHintViewMismatchLabelKo`)이 view mismatch 경로에서 동일 문구를 일관되게 반환하는지 검증
  - 오프라인 비교 가이드 checksum 불일치 라벨(`buildOfflineDetailCompareActionHintChecksumMismatchLabelKo`)이 checksum/view checksum mismatch 경로에서 동일 문구를 일관되게 반환하는지 검증
  - 오프라인 비교 가이드 라벨(`buildOfflineDetailCompareActionHintLabelKo`)이 입력 필요/형식 오류/현재 코드 없음/일치/보기 모드 차이/checksum·집계 차이 케이스를 일관되게 반환하는지 검증
  - 오프라인 비교 가이드 톤(`buildOfflineDetailCompareActionHintTone`)이 입력 필요/형식 오류/현재 코드 없음/일치/보기 모드 차이/checksum·집계 차이 케이스에서 `warn/error/info`를 일관되게 반환하는지 검증
  - 오프라인 비교 보기 모드 정렬 타깃(`resolveOfflineDetailCompareViewModeAlignmentTarget`)이 `view-only mismatch`에서만 대상 모드(`all/critical`)를 반환하는지 검증
  - 오프라인 비교 대조(`parseOfflineDetailCompareCode`, `resolveOfflineDetailCompareCodeDiff`, `buildOfflineDetailCompareResultLabelKo`)가 파싱/차이 요약/오류 문구를 일관되게 반환하는지 검증
  - 오프라인 리포트 스냅샷(`buildOfflineDetailReportSnapshot`)이 필터 집계/라벨/숨김 상위 종류 및 kind digest(view 포함)/compareCode를 일관되게 반환하는지 검증
  - 오프라인 핵심 이벤트 요약(`summarizeOfflineDetailCriticalEvents`, `buildOfflineDetailCriticalSummaryLabelKo`)이 카운트/라벨을 일관되게 반환하는지 검증
  - 자동 재개 워밍업 가드(`autoBreakthroughWarmupUntilSec`)가 지정 구간에서 자동 돌파를 지연하고 타임라인 오프셋 기준 잔여 시간을 일관되게 계산하는지 검증
  - 오프라인 정산(`runOfflineCatchup`)이 워밍업 가드와 잔여시간을 일관되게 반영하는지 검증
  - 오프라인 정산 summary 워밍업 메타(`autoBreakthroughWarmupRemainingSecBefore/After`)가 경과시간 0초/부분 경과/완전 소진 케이스에서 일관되게 기록되는지 검증
  - 보정 효과 요약(`resolveBreakthroughMitigationSummary`)이 위험도 변화/확률 델타를 일관되게 반환하는지 검증
  - 돌파 권장 정책(`resolveBreakthroughRecommendation`)이 보유 자원/사용 상태에 맞는 문구를 반환하는지 검증
  - 돌파 권장 토글 정책(`resolveBreakthroughRecommendationToggles`)이 고위험/중위험/비도겁 구간에서 올바른 토글 상태를 반환하는지 검증
  - 슬롯 요약 퀵 액션 분기(`ok/empty/corrupt`) 결정 로직 검증
  - 슬롯 요약 퀵 로드 디바운스(0.7초) 중복 입력 차단 검증
  - 슬롯 복제/삭제 정책(`same_slot/target_empty/target_has_data/corrupt_slot`) 검증
  - 슬롯 잠금 정책(`target_locked/slot_locked`) 차단 및 힌트/톤 매핑 검증
  - 슬롯 액션 힌트 문구가 정책 결과와 일치하는지 검증
  - 슬롯 액션 힌트 톤(`info/warn/error`)이 정책 결과와 일치하는지 검증
  - 복제 대상 슬롯 상태 라벨/톤(`resolveSlotSummaryStateLabelKo`, `resolveSlotSummaryStateTone`) 검증
  - 전투 속도 설정에 따른 자동 루프 cadence 차이 검증
  - 타임라인 오프셋 기반 1초 chunk 연속 실행 시 cadence 유지 검증(실시간 루프 기반)
  - 자동 10초 루프 실행
  - 오프라인 복귀 20시간 입력 시 설정 cap(`offlineCapHours`) 정산 검증
  - 오프라인 경과시간 0초일 때 정산 skip(`time_not_elapsed`) 검증
  - 저장 직렬화/복원 roundtrip
  - 모바일 화면 필수 DOM id/모달 요소/safe-area 스타일 계약 검증
